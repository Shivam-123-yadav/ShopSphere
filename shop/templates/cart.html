{% extends "base.html" %}
{% block content %}


<h3 class="mb-4 fw-bold text-gradient"><i class="fas fa-shopping-cart me-2"></i>Shopping Cart</h3>


{% if cart_items %}
<div class="row animate__animated animate__fadeInUp">
  <!-- Cart Items -->
  <div class="col-md-8">
    <ul class="list-group mb-3">
      {% for item in cart_items %}
      <li class="list-group-item d-flex align-items-center justify-content-between cart-item-card">
        <!-- Product Info -->
        <div class="d-flex align-items-center">
          {% if item.product.images.first %}
            <img src="{{ item.product.images.first.image.url }}" 
                 alt="{{ item.product.name }}" 
                 class="img-fluid rounded-3 me-3 border border-2 border-warning-subtle" 
                 style="width:80px; height:80px; object-fit:cover;">
          {% else %}
            <img src="https://via.placeholder.com/80" 
                 alt="{{ item.product.name }}" 
                 class="img-fluid rounded-3 me-3 border border-2 border-warning-subtle">
          {% endif %}
          <div>
            <h6 class="mb-1 fw-bold">{{ item.product.name }}</h6>
            <span class="badge bg-warning text-dark mb-1">₹{{ item.product.price|floatformat:0 }}</span>
            <!-- Quantity Update -->
            <form method="post" action="{% url 'cart_update' item.product.id %}" class="d-flex align-items-center gap-2 mt-1">
              {% csrf_token %}
              <input type="number" name="quantity" value="{{ item.quantity }}" min="1" class="form-control form-control-sm rounded-pill text-center quantity-input" style="width:70px;">
              <button class="btn btn-outline-warning btn-sm rounded-pill fw-bold">Update</button>
            </form>
            <a href="{% url 'cart_remove' item.product.id %}" class="text-danger small mt-1 d-inline-block">Remove</a>
          </div>
        </div>
        <!-- Item Total -->
        <div>
          <span class="fw-bold text-success fs-5">₹{{ item.total_price|floatformat:0 }}</span>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
  <!-- Order Summary -->
  <div class="col-md-4">
    <div class="p-4 rounded-4 shadow-lg bg-white bg-opacity-75 border border-2 border-warning-subtle animate__animated animate__fadeInRight">
      <h5 class="card-title mb-3 text-gradient">Order Summary</h5>
      <p class="d-flex justify-content-between mb-2">
        <span>Items:</span>
        <span>{{ cart_items|length }}</span>
      </p>
      <p class="d-flex justify-content-between fw-bold fs-5">
        <span>Total:</span>
        <span class="text-gradient">₹{{ total|floatformat:0 }}</span>
      </p>
      <a href="{% url 'checkout' %}" class="btn btn-success w-100 rounded-pill fw-bold shadow-sm mt-2"><i class="fas fa-arrow-right me-1"></i>Proceed to Checkout</a>
    </div>
  </div>
</div>
{% else %}
<p class="text-center">Your cart is empty.</p>
{% endif %}

<style>
.text-gradient {
  background: linear-gradient(90deg, #FFD700, #FFA500 80%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.cart-item-card {
  border-radius: 1.2rem;
  box-shadow: 0 4px 18px #FFD70011;
  margin-bottom: 0.5rem;
  transition: box-shadow 0.18s, transform 0.18s;
}
.cart-item-card:hover {
  box-shadow: 0 8px 32px #FFD70033;
  transform: translateY(-3px) scale(1.01);
}
.quantity-input:focus {
  border-color: #FFD700;
  box-shadow: 0 0 0 0.15rem #FFD70044;
}
@media (max-width: 576px) {
  .rounded-4 { border-radius: 1rem !important; }
  .cart-item-card { padding: 0.5rem 0.2rem; }
}
</style>

{% endblock %}
